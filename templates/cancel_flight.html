{% extends "base.html" %}

{% block title %}Confirm Flight Cancellation{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='tables.css') }}">

<div class="container">
    <h2>Confirm Flight Cancellation</h2>
    <p style="text-align: center; color: #7f8c8d; margin-bottom: 30px;">
        Review the details below. Once confirmed, this flight will be marked as cancelled.
    </p>

    <table class="flight-table">
        <thead>
            <tr>
                <th>Flight ID</th>
                <th>Current Status</th>
                <th>Departure</th>
                <th>Route</th>
                <th>Aircraft</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="font-weight: bold;">{{ flight_id }}</td>
                <td>
                    <span class="status-badge {{ 'status-active' if flight_status == 'Scheduled' else 'status-cancelled' }}">
                        {{ flight_status }}
                    </span>
                </td>
                <td>{{ departure_date }} | {{ departure_time }}</td>
                <td>{{ origin_airport }} ✈ {{ destination_airport }}</td>
                <td>{{ aircraft_id }}</td>
            </tr>
        </tbody>
    </table>

    <div style="margin-top: 40px; text-align: center;">
        <form method="post" action="/admin_cancel_flight/confirm" onsubmit="return confirm('Final warning: Cancel flight {{ flight_id }}?');">
            <input type="hidden" name="flight_number" value="{{ flight_id }}">

            {% if cancel_time %}
                <input type="submit" value="Confirm & Cancel Flight" class="btn-large">

                <p style="color: #d73a49; margin-top: 15px; font-weight: bold; font-size: 0.9rem;">
                    ⚠ This action will notify passengers and unassign crew.
                </p>
            {% else %}
                <input type="submit" value="Cancellation Locked" class="btn-large" disabled>
            {% endif %}
        </form>
    </div>

    <div style="text-align: center; margin-top: 30px; padding-bottom: 50px;">
        <a href="/admin_homepage" class="back-link">← Return to Admin Dashboard</a>
    </div>
</div>
{% endblock %}