{% extends "base.html" %}

{% block title %}My Personal Profile{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='tables.css') }}">

<div class="container">
    <h2 style="margin-bottom: 10px;">Personal Profile</h2>
    <p style="text-align: center; color: #7f8c8d; margin-bottom: 30px;">Manage your personal information and contact details.</p>

    {% if success %}
        <div style="background-color: #e6ffed; color: #22863a; padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: center; border: 1px solid #22863a;">
            <strong>Success!</strong> {{ success }}
        </div>
    {% endif %}

    <div style="max-width: 800px; margin: 0 auto;">
        <form action="/profile_details" method="POST">

            <fieldset style="background-color: #f8fafc;">
                <legend><h3>Account Information</h3></legend>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" value="{{ user.email }}" disabled title="Email cannot be changed">
                    </div>
                    <div class="form-group">
                        <label>Date of Birth</label>
                        <input type="text" value="{{ user.birth_date }}" disabled title="Birth date cannot be changed">
                    </div>
                </div>
                <p style="font-size: 0.8rem; color: #7f8c8d; margin-top: 10px;">* Fields above are verified and cannot be modified online.</p>
            </fieldset>

            <fieldset style="margin-top: 30px; border-color: #1a73e8;">
                <legend><h3 style="color: #1a73e8;">Traveler Details</h3></legend>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="first_name">First Name</label>
                        <input type="text" id="first_name" name="first_name" value="{{ user.first_name }}"
                               pattern="[A-Za-z\s]+" title="English letters only" maxlength="50" required>
                    </div>
                    <div class="form-group">
                        <label for="last_name">Last Name</label>
                        <input type="text" id="last_name" name="last_name" value="{{ user.last_name }}"
                               pattern="[A-Za-z\s]+" title="English letters only" maxlength="50" required>
                    </div>
                    <div class="form-group">
                        <label for="passport">Passport Number</label>
                        <input type="text" id="passport" name="passport" value="{{ user.passport }}"
                               maxlength="20" required placeholder="Enter passport number">
                    </div>
                </div>
            </fieldset>

            <fieldset style="margin-top: 30px;">
                <legend><h3>Contact Numbers</h3></legend>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Primary Phone</label>
                        <input type="text" name="phones" value="{{ user.phones[0] if user.phones|length > 0 else '' }}"
                               minlength="9" maxlength="15" pattern="\d+" title="Please enter at least 9 digits" required>
                    </div>
                    <div class="form-group">
                        <label>Secondary Phone (Optional)</label>
                        <input type="text" name="phones" value="{{ user.phones[1] if user.phones|length > 1 else '' }}"
                               pattern="\d+" minlength="9" maxlength="15">
                    </div>
                    <div class="form-group">
                        <label>Additional Phone (Optional)</label>
                        <input type="text" name="phones" value="{{ user.phones[2] if user.phones|length > 2 else '' }}"
                               pattern="\d+" minlength="9" maxlength="15">
                    </div>
                </div>
            </fieldset>

            <div style="text-align: center; margin-top: 40px; padding-bottom: 50px;">
                <button type="submit" class="btn-large" style="max-width: 300px;">Save Changes</button>
            </div>
        </form>

        <div style="text-align: center;">
            <a href="/" class="back-link">‚Üê Back to Homepage</a>
        </div>
    </div>
</div>
{% endblock %}